<style type="text/css">
input {
    padding: 10px;
    font-size: 16px;
}

.controls {
    padding: 10px;
}
.nav-stacked {
    height: 500px;
    overflow: auto;
}


</style>
<div class="row-fluid">
    <div class="span2">
        <div class="row-fluid controls">
            <button class="btn" ng-click="newQuestion()">New Question</button>
        </div>
        <ul class="nav nav-pills nav-stacked" ng-model="survey.questions" ui-sortable>
            <li title="{{question.title}}"
                ng-click="$parent.startEditingQuestion(question)"
                ng-class="{'active': question == questionBeingEdited }"
                ng-repeat="question in survey.questions">
                <a>{{question.label}} ({{question.order}}) {{ question.update }}</a>
            </li>
        </ul>
        <p ng-hide="survey.questions.length">No Questions, yet.</p>
    </div>
    <div class="span10">
        <div class="well" ng-show="newSurvey">
            <h1>New Survey</h1>
            <label>Name</label>
            <input ng-model="survey.name" class="span12" placeholder="Survey Name"/>
            <div class="buttons pull-right">
                <button class="btn btn-primary btn-large" ng-click="createSurvey(survey)">
                    save
                </button>
            </div>
            <div class="clearfix">
            </div>
        </div>
        <div class="well">
            <h1>{{ survey.name }}</h1>
            <a class="pull-right btn" href="/admin/survey/question/{{activeQuestion.id}}/">edit</a>
            <form ng-submit="saveQuestion(activeQuestion)">

                <div class="row-fluid">
                    <label>Title</label>
                    <input class="span12" ng-model="activeQuestion.title" />
                </div>
                <div class="row-fluid">
                    <div class="span6">
                        <label>Label</label>
                        <input class="span12" ng-model="activeQuestion.label" />
                    </div>
                    <div class="span6">
                        <label>Slug</label>
                        <input class="span12" ng-model="activeQuestion.slug" />
                    </div>
                </div>
                <div class="row-fluid" ng-show="activeQuestion.question_types">
                    <div class="span6">
                        <label>Question Type</label>
                        <select ng-model="activeQuestion.type">
                            <option ng-repeat="(key, val) in activeQuestion.question_types" value="{{key}}" ng-selected="activeQuestion.type == key">{{val}}</option>
                        </select>
                        <label>Report Type</label>
                        <select ng-model="activeQuestion.report_type">
                            <option ng-repeat="(key, val) in activeQuestion.report_types" value="{{key}}" ng-selected="activeQuestion.report_type == key">{{val}}</option>
                        </select>
                        <label>
                            <input type="checkbox" ng-model="activeQuestion.visualize"/>
                            Visualize
                        </label>
                        <!-- <label>
                            <input type="checkbox" ng-model="activeQuestion.filterBy"/>
                            Filter By
                        </label> -->
                    </div>
                    <div class="span6">
                        <label>Order</label>
                        <input class="span12" ng-model="activeQuestion.order" />
                    </div>
                </div>
                <div class="row-fluid" ng-show="activeQuestion.type == 'single-select' || activeQuestion.type == 'multi-select'">
                    <div class="span6">
                        <label>Options</label>
                        <textarea class="input-block-level" rows="6" ng-model="activeQuestion.rows"></textarea>
                    </div>
                    <div class="span6">
                        <label>
                            <input type="checkbox" ng-model="activeQuestion.allow_other"/>
                            Allow Other
                        </label>
                    </div>
                </div>
            </div>
            </form>
            <div ng-show="activeQuestion.updated_at" class="pull-left">
                Updated at {{ activeQuestion.updated_at | date:'MM/dd/yyyy @ h:mma'}}
            </div>
            <div class="buttons pull-right">
                <button class="btn btn-danger btn-large" ng-click="startEditingQuestion(questionBeingEdited)">
                    reset
                </button>
                <button class="btn btn-primary btn-large" ng-click="saveQuestion(activeQuestion)" ng-enabled="activeQuestion.slug.length > 0">
                    save
                </button>

            </div>
            <div class="clearfix">
            </div>
        </div>
    </div>
</div>