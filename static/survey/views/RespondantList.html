<h1>{{ survey.name }}</h1>
<div class="row-fluid">
    <div class="span4">
        <div class="well">
            <h2>{{ survey.survey_responses |number}} surveys taken</h2>
            <ul class="unstyled">
                <li><strong>{{ survey.completes |number}}</strong> complete ({{(survey.completes/survey.survey_responses)*100 |number:2}}%)</li>
                <li><strong>{{ survey.survey_responses - survey.completes | number}}</strong> incomplete ({{((survey.survey_responses - survey.completes)/survey.survey_responses) * 100|number:2}}%)</li>
            </ul>
        </div>
        <div class="row-fluid" ng-repeat="question in survey.questions">
            <div class="span12"  ui-if="question.filterBy">
                <h4>{{question.label}}</h4>
                <select
                    ng-model="$parent.filterBy"
                    placeholder="{{ question.label }}"
                    class="span12"
                    multiple=true
                    required>
                    <option value="">{{ question.label }}</option>
                    <option 
                        ng-repeat="answer in question.answer_domain"
                        value="{{ $index }}">
                            {{ answer.answer }} ({{answer.count}})
                    </option>
                </select>
            </div>
        </div>
    </div>
    <div class="span8">
        <div class="row-fluid" ng-repeat="question in survey.questions">
            <h3>{{ filterBy }}</h3>
            <div  ui-if="question.visualize">
                <h4>Distribution by {{ question.label }}</h4>
                <table class="table">
                    <tr ng-repeat="answer in question.answer_domain">
                        <td>{{ answer.answer}} ({{ answer.count}})</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>
